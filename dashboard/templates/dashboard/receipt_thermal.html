<!DOCTYPE html>
<html>
<head>
  <title>Receipt #{{ sale.id }}</title>
  <style>
    body {
      font-family: monospace;
      font-size: 10px;
      padding: 0;
      margin: 0;
      width: 58mm;
    }
    .receipt {
      padding: 5px;
      width: 100%;
    }
    .center {
      text-align: center;
    }
    .right {
      text-align: right;
    }
    .line {
      display: flex;
      justify-content: space-between;
    }
    .dashed {
      border-top: 1px dashed #000;
      margin: 5px 0;
    }
    h2, p {
      margin: 2px 0;
    }
    .offer-label {
      color: #e60000;
      font-weight: bold;
    }
    .strike {
      text-decoration: line-through;
      color: #999;
    }
  </style>
</head>
<body onload="window.print(); window.close();">
  <div class="receipt">
    <!-- Header -->
    <div class="center">
      <h2>ðŸ§¾ UNIQUE STORE</h2>
      <p>{{ sale.branch.name }}</p>
      <p>{{ sale.branch.location }}</p>
    </div>

    <div class="dashed"></div>

    <!-- Customer Info -->
    <p>Customer: {{ sale.customer.name }}</p>
    <p>Phone: {{ sale.customer.phone }}</p>

    <div class="dashed"></div>

    <!-- Items -->
    {% for item in items %}
      <div>
        <div class="line">
          <span>{{ item.product.name|truncatechars:20 }}</span>
          <span>x{{ item.quantity }}</span>
        </div>
        <div class="line">
          <span>Rate:</span>
          <span>â‚¹{{ item.price|floatformat:2 }}</span>
        </div>
      </div>
    {% endfor %}

    <div class="dashed"></div>

    <!-- Totals -->
{% if sale.total_override %}
  <div class="line strike">
    <span>Subtotal:</span><span>â‚¹{{ subtotal|floatformat:2 }}</span>
  </div>
  <div class="line">
    <strong>Offer Subtotal:</strong><strong>â‚¹{{ subtotal|floatformat:2 }}</strong>
  </div>
  <div class="line">
    <strong>Offer GST:</strong><strong>â‚¹{{ gst_total|floatformat:2 }}</strong>
  </div>
  <div class="line">
    <strong>Total (Offer):</strong><strong>â‚¹{{ total|floatformat:2 }}</strong>
  </div>
{% else %}
  <div class="line">
    <strong>Subtotal:</strong><strong>â‚¹{{ subtotal|floatformat:2 }}</strong>
  </div>
  <div class="line">
    <strong>GST Total:</strong><strong>â‚¹{{ gst_total|floatformat:2 }}</strong>
  </div>
  <div class="line">
    <strong>Total:</strong><strong>â‚¹{{ total|floatformat:2 }}</strong>
  </div>
{% endif %}



    <div class="line">
      <strong>Paid:</strong>
      <strong>â‚¹{{ sale.amount_paid|floatformat:2 }}</strong>
    </div>

    <p><strong>Payment Method:</strong> {{ sale.payment_method }}</p>

    <div class="dashed"></div>

    <!-- Footer -->
    <div class="center">
      <p>{{ sale.date|date:"d M Y, H:i" }}</p>
      <p>Thank you for shopping!</p>
    </div>
  </div>
</body>
</html>
