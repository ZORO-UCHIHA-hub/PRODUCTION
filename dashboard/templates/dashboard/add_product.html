{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Add New Product{% endblock %}

{% block content %}
<main>
  <h1>Add New Product</h1>

<form method="POST" class="order-form">
  {% csrf_token %}
  
  <div class="form-group">
    <label for="name">Product Name</label>
    <input type="text" name="name" id="name" placeholder="e.g., Notebook" value="{{ product.name|default:'' }}" required>
  </div>

  <div class="form-group">
    <label for="price">Product Price (₹)</label>
    <input type="number" name="price" id="price" placeholder="e.g., 199" step="0.01" value="{{ product.price|default:'' }}" required>
  </div>

  <div class="form-group">
  <label for="gst_percent">GST (%)</label>
  <input type="number" name="gst_percent" id="gst_percent" step="0.01" required
         value="{{ product.gst_percent|default:'10.00' }}">
</div>

{% if product %}
<p><strong>Total Price with GST:</strong> ₹{{ product.price_with_gst|floatformat:2 }}</p>
{% endif %}


  {% if not editing %}
  <div class="form-group">
    <label for="stock">Initial Stock</label>
    <input type="number" name="stock" id="stock" placeholder="e.g., 100" min="0" required>
  </div>
  {% endif %}

  {% if is_admin and not editing %}
  <div class="form-group">
    <label for="branch">Branch</label>
    <select name="branch" id="branch" required>
      {% for branch in branches %}
      <option value="{{ branch.id }}">{{ branch.name }}</option>
      {% endfor %}
    </select>
  </div>
  {% endif %}

  <button type="submit" class="btn">
    {% if editing %}Update{% else %}Add Product{% endif %}
  </button>
</form>

</main>
{% endblock %}
